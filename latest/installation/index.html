<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Installation &#8212; Python FSPS  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/flasky.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Modelling Stellar Populations" href="../stellarpop_api/" />
    <link rel="prev" title="Flexible Stellar Population Synthesis for Python" href="../" />   
<meta
  name="viewport"
  content="width=device-width, initial-scale=0.9, maximum-scale=0.9"
/>

<!-- https://www.google.com/fonts#UsePlace:use/Collection:Source+Sans+Pro:400,700,400italic,700italic|Source+Code+Pro -->
<link
  href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic|Source+Code+Pro"
  rel="stylesheet"
  type="text/css"
/>

<link rel="shortcut icon" href="../_static/favicon.png" />


  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../stellarpop_api/" title="Modelling Stellar Populations"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="Flexible Stellar Population Synthesis for Python"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../">Python FSPS  documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Installation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h1>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading">¶</a></h2>
<p>Python-FSPS no longer has any compile time prerequisites (besides a working
Fortran compiler), but (if you’re not installing using git, see the “development
version” section below) it does require a clone of the <a class="reference external" href="https://github.com/cconroy20/fsps">FSPS</a> project for the data files. To get this
set up, you can clone that repository using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">SPS_HOME</span><span class="o">=</span><span class="s2">&quot;/path/where/you/want/to/download/fsps&quot;</span>
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/cconroy20/fsps.git<span class="w"> </span><span class="nv">$SPS_HOME</span>
</pre></div>
</div>
<p>Where, on different systems, you might have to specify the <cite>SPS_HOME</cite>
environment variable. Python-FSPS requires that variable to be set and it will
fail to import if it is set incorrectly.</p>
<p>Python-FSPS is built against specific versions of the FSPS Fortran API and data
files, so it is important that you have a recent version of FSPS through git.
Currently Python-FSPS is built against FSPS v3.2.</p>
</section>
<section id="installing-stable-version">
<h2>Installing stable version<a class="headerlink" href="#installing-stable-version" title="Permalink to this heading">¶</a></h2>
<p>Python-FSPS is available as a package on <a class="reference external" href="https://pypi.org/project/fsps/">PyPI</a> that you can install using <cite>pip</cite>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>fsps
</pre></div>
</div>
</section>
<section id="choosing-stellar-libraries">
<h2>Choosing Stellar Libraries<a class="headerlink" href="#choosing-stellar-libraries" title="Permalink to this heading">¶</a></h2>
<p>FSPS can use several different stellar isochrone and spectral libraries, but
switching between these libraries in python-FSPS requires (re-)installing
python-FSPS with specific compiler flags. The available libraries are described
in more detail in the FSPS documentation, but their names are:</p>
<ul>
<li><p>Stellar Isochrone libraries</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>MIST</cite> (default)</p></li>
<li><p><cite>PADOVA</cite></p></li>
<li><p><cite>PARSEC</cite></p></li>
<li><p><cite>BPASS</cite> (in this case the spectral library and SSP parameters cannot be changed)</p></li>
<li><p><cite>BASTI</cite></p></li>
<li><p><cite>GENEVA</cite></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Stellar spectral libraries</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>MILES</cite> (default)</p></li>
<li><p><cite>BASEL</cite></p></li>
</ul>
</div></blockquote>
</li>
<li><p>Dust emission libraries</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>DL07</cite> (default)</p></li>
<li><p><cite>THEMIS</cite></p></li>
</ul>
</div></blockquote>
</li>
</ul>
<p>Changing any of these libraries requires switching off the relevant default,
which for isochrones is <cite>MIST</cite> and for spectra is <cite>MILES</cite>, and switching on the
desired library. As an example, you can change to Padova isochrones and the
BaSeL low resolution synthetic stellar library by re-installing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>uninstall<span class="w"> </span>fsps
<span class="nv">FFLAGS</span><span class="o">=</span><span class="s2">&quot;-DMIST=0 -DPADOVA=1 -DMILES=0 -DBASEL=1&quot;</span><span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>fsps<span class="w"> </span>--no-binary<span class="w"> </span>fsps
</pre></div>
</div>
<p>where the <cite>–no-binary fsps</cite> flag is required to force building from source.</p>
</section>
<section id="installing-development-version">
<h2>Installing development version<a class="headerlink" href="#installing-development-version" title="Permalink to this heading">¶</a></h2>
<p>Python-FSPS is being actively developed on GitHub so you can got there to get
the most recent development version. You can do this by cloning the <a class="reference external" href="https://github.com/dfm/python-fsps">python-fsps
repository</a> and building:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>--recursive<span class="w"> </span>https://github.com/dfm/python-fsps.git
<span class="nb">cd</span><span class="w"> </span>python-fsps
python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>Flags can be prepended to change the stellar libraries as described above. This
repository includes FSPS as a submodule, so if you forget the <cite>–recursive</cite> flag
above, you can get the submodule by running the following commands in the root
directory of the Python-FSPS repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>submodule<span class="w"> </span>init
git<span class="w"> </span>submodule<span class="w"> </span>update
</pre></div>
</div>
<p>If you install Python-FSPS using this method, you don’t actually need a separate
FSPS clone and you can just set the <cite>SPS_HOME</cite> variable as:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">SPS_HOME</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/src/fsps/libfsps
</pre></div>
</div>
<p>It is recommended that you install using <cite>pip</cite> even for a local clone. In the
root directory of the repository, run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>.
</pre></div>
</div>
<p>Starting with version 0.5.0, Python-FSPS no longer supports “development” or
“editable” builds, but the builds should be cached and re-used if you run <cite>pip
install</cite> multiple times.</p>
</section>
<section id="running-the-unit-tests">
<h2>Running the unit tests<a class="headerlink" href="#running-the-unit-tests" title="Permalink to this heading">¶</a></h2>
<p>The unit tests are implemented in the <cite>tests</cite> subdirectory, and can be executed
using <a class="reference external" href="https://nox.thea.codes">nox</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>nox
python<span class="w"> </span>-m<span class="w"> </span>nox
</pre></div>
</div>
<p>or <a class="reference external" href="https://docs.pytest.org">pytest</a> directly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;.[test]&quot;</span>
python<span class="w"> </span>-m<span class="w"> </span>pytest<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span><span class="w"> </span>-v<span class="w"> </span>tests/tests.py
</pre></div>
</div>
<p>where <cite>-n 2</cite> specifies the number of parallel processes to use. The tests can be
quite slow, but also memory intensive, so it can be useful to run them in
parallel, but don’t overdo it and run out of memory!</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
    <a href="../">
        <img class="logo" src="../_static/pyfsps_logo.svg" alt="Logo"/>
    </a>
</p>

<p>
    Python-FSPS is a set of bindings to Charlie Conroy's
    <a href="https://github.com/cconroy20/fsps">
      Flexible Stellar Population Synthesis</a> Fortran library.
</p>
  <h3><a href="../">Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#installing-stable-version">Installing stable version</a></li>
<li><a class="reference internal" href="#choosing-stellar-libraries">Choosing Stellar Libraries</a></li>
<li><a class="reference internal" href="#installing-development-version">Installing development version</a></li>
<li><a class="reference internal" href="#running-the-unit-tests">Running the unit tests</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../">Documentation overview</a><ul>
      <li>Previous: <a href="../" title="previous chapter">Flexible Stellar Population Synthesis for Python</a></li>
      <li>Next: <a href="../stellarpop_api/" title="next chapter">Modelling Stellar Populations</a></li>
  </ul></li>
</ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>

<div class="footer">&copy; Copyright 2013-2021 Python-FSPS developers.</div>
  </body>
</html>